<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <!-- 
        HTMLå¤´éƒ¨ - å®šä¹‰ç½‘é¡µåŸºæœ¬ä¿¡æ¯å’Œå¼•å…¥æ ·å¼
        charset="UTF-8" ç¡®ä¿ä¸­æ–‡æ­£ç¡®æ˜¾ç¤º
        viewport è®©ç½‘é¡µé€‚é…æ‰‹æœºå±å¹•
        title æ˜¯æµè§ˆå™¨æ ‡ç­¾é¡µæ˜¾ç¤ºçš„æ ‡é¢˜
    -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç®€å•å¾…åŠæ¸…å•</title>

  <style>
    /* 
            CSSæ ·å¼éƒ¨åˆ† - æ§åˆ¶ç½‘é¡µçš„å¤–è§‚
            æ ¼å¼ï¼šé€‰æ‹©å™¨ { å±æ€§: å€¼; }
        */

    /* å…¨å±€é‡ç½® - æ¸…é™¤æµè§ˆå™¨é»˜è®¤æ ·å¼ */
    * {
      margin: 0;
      /* å¤–è¾¹è·å½’é›¶ */
      padding: 0;
      /* å†…è¾¹è·å½’é›¶ */
      box-sizing: border-box;
      /* ç›’æ¨¡å‹è®¾ç½®ï¼Œè®©å®½é«˜åŒ…å«paddingå’Œborder */
    }

    /* bodyæ ‡ç­¾æ ·å¼ - æ•´ä¸ªé¡µé¢çš„èƒŒæ™¯å’Œæ–‡å­— */
    body {
      font-family: Arial, sans-serif;
      /* å­—ä½“è®¾ç½® */
      background-color: #f5f5f5;
      /* æµ…ç°è‰²èƒŒæ™¯ */
      padding: 20px;
      /* é¡µé¢å››å‘¨ç•™ç™½ */
    }

    /* ä¸»å®¹å™¨ - å±…ä¸­æ˜¾ç¤ºå†…å®¹åŒºåŸŸ */
    .container {
      max-width: 600px;
      /* æœ€å¤§å®½åº¦600åƒç´  */
      margin: 0 auto;
      /* ä¸Šä¸‹0ï¼Œå·¦å³è‡ªåŠ¨ï¼ˆå±…ä¸­ï¼‰ */
      background: white;
      /* ç™½è‰²èƒŒæ™¯ */
      border-radius: 10px;
      /* åœ†è§’è¾¹æ¡† */
      padding: 20px;
      /* å†…è¾¹è· */
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      /* é˜´å½±æ•ˆæœ */
    }

    /* æ ‡é¢˜æ ·å¼ */
    h1 {
      text-align: center;
      /* æ–‡å­—å±…ä¸­ */
      color: #333;
      /* æ·±ç°è‰²æ–‡å­— */
      margin-bottom: 20px;
      /* ä¸‹è¾¹è· */
    }

    /* è¾“å…¥åŒºåŸŸæ ·å¼ */
    .input-area {
      display: flex;
      /* å¼¹æ€§ç›’å­å¸ƒå±€ */
      margin-bottom: 20px;
      /* ä¸‹è¾¹è· */
    }

    /* è¾“å…¥æ¡†æ ·å¼ */
    #taskInput {
      flex: 1;
      /* å æ®å‰©ä½™ç©ºé—´ */
      padding: 10px;
      /* å†…è¾¹è· */
      border: 2px solid #ddd;
      /* è¾¹æ¡† */
      border-radius: 5px;
      /* åœ†è§’ */
      font-size: 16px;
      /* å­—ä½“å¤§å° */
    }

    /* è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„æ ·å¼ */
    #taskInput:focus {
      outline: none;
      /* å»æ‰é»˜è®¤å¤–è¾¹æ¡† */
      border-color: #4CAF50;
      /* ç»¿è‰²è¾¹æ¡† */
    }

    /* æŒ‰é’®é€šç”¨æ ·å¼ */
    button {
      padding: 10px 20px;
      /* å†…è¾¹è· */
      border: none;
      /* æ— è¾¹æ¡† */
      border-radius: 5px;
      /* åœ†è§’ */
      cursor: pointer;
      /* é¼ æ ‡æŒ‡é’ˆå˜æˆæ‰‹å‹ */
      font-size: 16px;
      /* å­—ä½“å¤§å° */
      margin-left: 10px;
      /* å·¦è¾¹è· */
    }

    /* æ·»åŠ æŒ‰é’®ç‰¹å®šæ ·å¼ */
    #addBtn {
      background-color: #4CAF50;
      /* ç»¿è‰²èƒŒæ™¯ */
      color: white;
      /* ç™½è‰²æ–‡å­— */
    }

    /* æ¸…é™¤æŒ‰é’®ç‰¹å®šæ ·å¼ */
    #clearBtn {
      background-color: #f44336;
      /* çº¢è‰²èƒŒæ™¯ */
      color: white;
      /* ç™½è‰²æ–‡å­— */
    }

    /* ä»»åŠ¡åˆ—è¡¨æ ·å¼ */
    #taskList {
      list-style: none;
      /* å»æ‰åˆ—è¡¨å‰çš„åœ†ç‚¹ */
    }

    /* å•ä¸ªä»»åŠ¡é¡¹æ ·å¼ */
    .task-item {
      background-color: #f9f9f9;
      /* æµ…ç°è‰²èƒŒæ™¯ */
      padding: 12px;
      /* å†…è¾¹è· */
      margin-bottom: 8px;
      /* ä¸‹è¾¹è· */
      border-radius: 5px;
      /* åœ†è§’ */
      display: flex;
      /* å¼¹æ€§ç›’å­å¸ƒå±€ */
      align-items: center;
      /* å‚ç›´å±…ä¸­ */
      justify-content: space-between;
      /* ä¸¤ç«¯å¯¹é½ */
    }

    /* é¼ æ ‡æ‚¬åœåœ¨ä»»åŠ¡é¡¹ä¸Šçš„æ•ˆæœ */
    .task-item:hover {
      background-color: #f0f0f0;
      /* ç¨å¾®æ·±ä¸€ç‚¹çš„èƒŒæ™¯è‰² */
    }

    /* å·²å®Œæˆä»»åŠ¡é¡¹çš„æ ·å¼ */
    .completed {
      text-decoration: line-through;
      /* åˆ é™¤çº¿æ•ˆæœ */
      color: #888;
      /* ç°è‰²æ–‡å­— */
    }

    /* ä»»åŠ¡æ–‡æœ¬æ ·å¼ */
    .task-text {
      flex: 1;
      /* å æ®å‰©ä½™ç©ºé—´ */
      margin: 0 10px;
      /* å·¦å³è¾¹è· */
    }

    /* åˆ é™¤æŒ‰é’®æ ·å¼ */
    .delete-btn {
      background-color: #ff5555;
      /* çº¢è‰²èƒŒæ™¯ */
      color: white;
      /* ç™½è‰²æ–‡å­— */
      padding: 5px 10px;
      /* å†…è¾¹è· */
      border-radius: 3px;
      /* å°åœ†è§’ */
      font-size: 14px;
      /* è¾ƒå°å­—ä½“ */
    }

    /* ç©ºçŠ¶æ€æç¤ºæ ·å¼ */
    #emptyMessage {
      text-align: center;
      /* æ–‡å­—å±…ä¸­ */
      color: #888;
      /* ç°è‰²æ–‡å­— */
      padding: 20px;
      /* å†…è¾¹è· */
      display: none;
      /* é»˜è®¤éšè— */
    }

    /* ä»»åŠ¡ç»Ÿè®¡æ ·å¼ */
    #taskStats {
      text-align: center;
      /* æ–‡å­—å±…ä¸­ */
      color: #666;
      /* ä¸­ç°è‰²æ–‡å­— */
      margin-top: 20px;
      /* ä¸Šè¾¹è· */
      font-size: 14px;
      /* è¾ƒå°å­—ä½“ */
    }
  </style>
</head>

<body>
  <!-- 
        HTMLä¸»ä½“éƒ¨åˆ† - ç”¨æˆ·çœ‹åˆ°çš„å†…å®¹
        ç»“æ„ï¼šå®¹å™¨ > æ ‡é¢˜ > è¾“å…¥åŒº > åˆ—è¡¨ > ç»Ÿè®¡
    -->
  <div class="container">
    <h1>ğŸ“ æˆ‘çš„å¾…åŠæ¸…å•</h1>

    <!-- è¾“å…¥åŒºåŸŸï¼šè¾“å…¥æ¡† + æ·»åŠ æŒ‰é’® + æ¸…é™¤æŒ‰é’® -->
    <div class="input-area">
      <input type="text" id="taskInput" placeholder="è¾“å…¥æ–°ä»»åŠ¡...">
      <button id="addBtn">æ·»åŠ </button>
      <button id="clearBtn">æ¸…é™¤æ‰€æœ‰</button>
    </div>

    <!-- ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ -->
    <ul id="taskList">
      <!-- åˆ—è¡¨é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
    </ul>

    <!-- ç©ºçŠ¶æ€æç¤ºï¼šå½“æ²¡æœ‰ä»»åŠ¡æ—¶æ˜¾ç¤º -->
    <div id="emptyMessage">
      è¿˜æ²¡æœ‰ä»»åŠ¡ï¼Œæ·»åŠ ä¸€ä¸ªå§ï¼
    </div>

    <!-- ä»»åŠ¡ç»Ÿè®¡åŒºåŸŸ -->
    <div id="taskStats">
      æ€»ä»»åŠ¡æ•°: <span id="totalCount">0</span> |
      å·²å®Œæˆ: <span id="completedCount">0</span>
    </div>
  </div>

  <script>
    // ============================================
    // JavaScriptéƒ¨åˆ† - å®ç°ç½‘é¡µçš„äº¤äº’åŠŸèƒ½
    // ============================================

    // 1. è·å–DOMå…ƒç´ ï¼ˆæ‰¾åˆ°HTMLä¸­çš„å…ƒç´ ï¼‰
    // --------------------------------------------------
    const taskInput = document.getElementById('taskInput');  // è¾“å…¥æ¡†
    const addBtn = document.getElementById('addBtn');        // æ·»åŠ æŒ‰é’®
    const clearBtn = document.getElementById('clearBtn');    // æ¸…é™¤æŒ‰é’®
    const taskList = document.getElementById('taskList');    // ä»»åŠ¡åˆ—è¡¨
    const emptyMessage = document.getElementById('emptyMessage'); // ç©ºæç¤º
    const totalCount = document.getElementById('totalCount');     // æ€»ä»»åŠ¡æ•°æ˜¾ç¤º
    const completedCount = document.getElementById('completedCount'); // å·²å®Œæˆæ˜¾ç¤º

    // 2. å®šä¹‰ä»»åŠ¡æ•°ç»„ - ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä»»åŠ¡
    // --------------------------------------------------
    let tasks = [];  // åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„

    // 3. æ·»åŠ ä»»åŠ¡åŠŸèƒ½
    // --------------------------------------------------
    function addTask() {
      // è·å–è¾“å…¥æ¡†çš„å€¼å¹¶å»é™¤é¦–å°¾ç©ºæ ¼
      const taskText = taskInput.value.trim();

      // æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºç©º
      if (taskText === '') {
        alert('è¯·è¾“å…¥ä»»åŠ¡å†…å®¹ï¼');  // å¼¹å‡ºæç¤ºæ¡†
        taskInput.focus();          // è®©è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹
        return;                     // ç»“æŸå‡½æ•°æ‰§è¡Œ
      }

      // åˆ›å»ºä»»åŠ¡å¯¹è±¡
      const newTask = {
        id: Date.now(),          // ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
        text: taskText,          // ä»»åŠ¡æ–‡æœ¬
        completed: false         // å®ŒæˆçŠ¶æ€ï¼ˆé»˜è®¤æœªå®Œæˆï¼‰
      };

      // å°†æ–°ä»»åŠ¡æ·»åŠ åˆ°æ•°ç»„
      tasks.push(newTask);

      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      saveTasks();

      // æ›´æ–°æ˜¾ç¤º
      renderTasks();

      // æ¸…ç©ºè¾“å…¥æ¡†å¹¶èšç„¦
      taskInput.value = '';
      taskInput.focus();
    }

    // 4. åˆ é™¤ä»»åŠ¡åŠŸèƒ½
    // --------------------------------------------------
    function deleteTask(id) {
      // è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤åˆ é™¤
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) {
        // è¿‡æ»¤æ•°ç»„ï¼Œåªä¿ç•™idä¸åŒ¹é…çš„ä»»åŠ¡
        tasks = tasks.filter(task => task.id !== id);

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        saveTasks();

        // æ›´æ–°æ˜¾ç¤º
        renderTasks();
      }
    }

    // 5. åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
    // --------------------------------------------------
    function toggleTask(id) {
      // éå†ä»»åŠ¡æ•°ç»„ï¼Œæ‰¾åˆ°å¯¹åº”idçš„ä»»åŠ¡
      tasks = tasks.map(task => {
        if (task.id === id) {
          // åˆ‡æ¢å®ŒæˆçŠ¶æ€
          return { ...task, completed: !task.completed };
        }
        return task;
      });

      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      saveTasks();

      // æ›´æ–°æ˜¾ç¤º
      renderTasks();
    }

    // 6. æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨ï¼ˆåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä»»åŠ¡ï¼‰
    // --------------------------------------------------
    function renderTasks() {
      // æ¸…ç©ºå½“å‰åˆ—è¡¨å†…å®¹
      taskList.innerHTML = '';

      // å¦‚æœä»»åŠ¡æ•°ç»„ä¸ºç©ºï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€æç¤º
      if (tasks.length === 0) {
        emptyMessage.style.display = 'block';  // æ˜¾ç¤ºç©ºæç¤º
      } else {
        emptyMessage.style.display = 'none';   // éšè—ç©ºæç¤º

        // éå†æ‰€æœ‰ä»»åŠ¡ï¼Œåˆ›å»ºåˆ—è¡¨é¡¹
        tasks.forEach(task => {
          // åˆ›å»ºåˆ—è¡¨é¡¹å…ƒç´ 
          const li = document.createElement('li');
          li.className = 'task-item';  // æ·»åŠ CSSç±»å

          // å¦‚æœä»»åŠ¡å·²å®Œæˆï¼Œæ·»åŠ completedç±»
          if (task.completed) {
            li.classList.add('completed');
          }

          // è®¾ç½®åˆ—è¡¨é¡¹çš„å†…å®¹
          li.innerHTML = `
                        <input type="checkbox" ${task.completed ? 'checked' : ''}>
                        <span class="task-text">${task.text}</span>
                        <button class="delete-btn">åˆ é™¤</button>
                    `;

          // è·å–å­å…ƒç´ 
          const checkbox = li.querySelector('input[type="checkbox"]');
          const deleteBtn = li.querySelector('.delete-btn');

          // ä¸ºå¤é€‰æ¡†æ·»åŠ ç‚¹å‡»äº‹ä»¶
          checkbox.addEventListener('click', () => {
            toggleTask(task.id);
          });

          // ä¸ºåˆ é™¤æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
          deleteBtn.addEventListener('click', () => {
            deleteTask(task.id);
          });

          // å°†åˆ—è¡¨é¡¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­
          taskList.appendChild(li);
        });
      }

      // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
      updateStats();
    }

    // 7. æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    // --------------------------------------------------
    function updateStats() {
      // è®¡ç®—æ€»ä»»åŠ¡æ•°
      const total = tasks.length;

      // è®¡ç®—å·²å®Œæˆä»»åŠ¡æ•°ï¼ˆç­›é€‰completedä¸ºtrueçš„ä»»åŠ¡ï¼‰
      const completed = tasks.filter(task => task.completed).length;

      // æ›´æ–°æ˜¾ç¤º
      totalCount.textContent = total;
      completedCount.textContent = completed;
    }

    // 8. ä¿å­˜ä»»åŠ¡åˆ°æœ¬åœ°å­˜å‚¨
    // --------------------------------------------------
    function saveTasks() {
      // å°†ä»»åŠ¡æ•°ç»„è½¬æ¢æˆJSONå­—ç¬¦ä¸²ï¼Œä¿å­˜åˆ°localStorage
      localStorage.setItem('myTasks', JSON.stringify(tasks));
    }

    // 9. ä»æœ¬åœ°å­˜å‚¨åŠ è½½ä»»åŠ¡
    // --------------------------------------------------
    function loadTasks() {
      // ä»localStorageè·å–ä¿å­˜çš„ä»»åŠ¡æ•°æ®
      const savedTasks = localStorage.getItem('myTasks');

      // å¦‚æœæœ‰ä¿å­˜çš„æ•°æ®ï¼Œè§£æå¹¶åŠ è½½
      if (savedTasks) {
        tasks = JSON.parse(savedTasks);
        renderTasks();  // æ¸²æŸ“åŠ è½½çš„ä»»åŠ¡
      }
    }

    // 10. æ¸…é™¤æ‰€æœ‰ä»»åŠ¡
    // --------------------------------------------------
    function clearAllTasks() {
      // ç¡®è®¤ç”¨æˆ·æ˜¯å¦çœŸçš„è¦æ¸…é™¤æ‰€æœ‰ä»»åŠ¡
      if (tasks.length > 0 && confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰ä»»åŠ¡å—ï¼Ÿ')) {
        tasks = [];              // æ¸…ç©ºä»»åŠ¡æ•°ç»„
        saveTasks();             // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        renderTasks();           // é‡æ–°æ¸²æŸ“ï¼ˆä¼šæ˜¾ç¤ºç©ºçŠ¶æ€ï¼‰
      }
    }

    // 11. æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
    // --------------------------------------------------

    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', () => {
      loadTasks();  // åŠ è½½ä¿å­˜çš„ä»»åŠ¡
    });

    // ç‚¹å‡»æ·»åŠ æŒ‰é’®æ—¶æ·»åŠ ä»»åŠ¡
    addBtn.addEventListener('click', addTask);

    // æŒ‰å›è½¦é”®ä¹Ÿå¯ä»¥æ·»åŠ ä»»åŠ¡
    taskInput.addEventListener('keypress', (event) => {
      if (event.key === 'Enter') {
        addTask();
      }
    });

    // ç‚¹å‡»æ¸…é™¤æŒ‰é’®æ¸…é™¤æ‰€æœ‰ä»»åŠ¡
    clearBtn.addEventListener('click', clearAllTasks);

    // 12. æ·»åŠ ä¸€äº›ç¤ºä¾‹ä»»åŠ¡ï¼ˆä»…ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼‰
    // --------------------------------------------------
    if (localStorage.getItem('myTasks') === null) {
      tasks = [
        { id: 1, text: 'å­¦ä¹ HTMLåŸºç¡€', completed: true },
        { id: 2, text: 'å­¦ä¹ CSSæ ·å¼', completed: false },
        { id: 3, text: 'å­¦ä¹ JavaScriptäº¤äº’', completed: false }
      ];
      saveTasks();
      renderTasks();
    }
  </script>
</body>

</html>